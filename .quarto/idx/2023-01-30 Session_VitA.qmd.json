{"title":"30-01-2023 Exercise","markdown":{"yaml":{"title":"30-01-2023 Exercise","format":{"html":{"self-contained":true}}},"headingText":"Context","containsRefs":false,"markdown":"\n\n\nField trial in rural northern Ghana on the effect of Vitamin A given in large doses to children under 5 . The data in this exercise were taken from the baseline survey. They include interview data provided by the mother or her substitute, clinical and laboratory data. You will find the da-ta in VASTCHS.csv . Please note that in this csv file semi colons (;) have been used as field separators and comma's as decimal-point characters. Take this into account when you import the dataset in R!\n\n### 1. Preparation\n\n##### Keyboard shortcuts:\n\n    - `ctrl + shift + m` -\\> `%>%` (operador pipe)\n    - `ctrl + alt + i` -\\> Crea un chunk de c√≥digo\n\n##### Set working directory\n\n    - setwd(\"C:/Users/xxx/yyy\") \n    - getwd()\n\n##### Load (basic) packages\n\nTo import Excel files library(readxl) To calculate OR or RR library(EpiStats)\n\n```{r}\nlibrary(readxl)                      # To import Excel files\nlibrary(tidyverse)                   # Varias funciones de tidyverse (dplyr, ggplot2, etc.)\nlibrary(dslabs)                      # Paquete que contiene la base de datos de Gapminder\nlibrary(EpiStats)                    # To calculate OR or RR\n```\n\n##### Import data\n\n-   From Text (.csv)-example\n    -   data \\<- read.csv(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.csv\")\n-   From Excel file (.xls, .xlsx)-example\n    -   library(readxl)\n    -   data \\<- read_excel(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.xlsx\")\n-   from STATA file (.dta)-example\n    -   library(haven)\n    -   data \\<- read_dta(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.dta\")\n\nImporting a CSV under the name of vastchs, with \";\" as separator, and with \",\" as decimal:\n\n```{r}\nvastchs <- read.csv(\"C:/Users/pined/OneDrive - Universidad Nacional Mayor de San Marcos/Javier 2022/Belgica/AC2/Linear Regresion Exercise Database/Datasets/VASTCHS.csv\", sep=\";\", dec= \",\")\n```\n\n## 2. Descriptive Statistics\n\n#### Summary\n\n##### Numeric Variable\n\n```{r}\nsummary(vastchs$AGE)                      #summary\nvar(vastchs$AGE)                          #variance\nsd(vastchs$AGE)                           #standart desviation\n```\n\n##### Categoric Variable\n\nFrecuency and Percentage\n\n```{r}\ntable(vastchs$SEX)                        #Counting\nprop.table(table(vastchs$SEX))            #Percentages\n```\n\nRecode to a factor - From number to string\n\n```{r}\nvastchs$SEX2<-factor(vastchs$SEX, levels=c(1,2))\nsummary(vastchs$SEX2)\n```\n\n#### Creating variables- Recoding: Yes/No = 1/0\n\n```{r}\nvastchs$wasted<- ifelse(vastchs$WHZ< -2, 1,0)     #wasted si es menos a -2 poner 1 sino 0\nvastchs$stunded<- ifelse(vastchs$HAZ< -2, 1,0)     #stunded si es menos a -2 poner 1 sino 0\nvastchs$underweight<- ifelse(vastchs$WAZ< -2, 1,0)     #undweig si es menos a -2 poner 1 sino 0\nvastchs$anemia<- ifelse(vastchs$HB< 8, 1,0)     #anemia si es menos que 8 poner 1 sino 0\nvastchs$vitadef<- ifelse(vastchs$RETINOL< 0.7, 1,0)     #Def of VitA si es menos de 0.7 poner 1 sino 0\n\nvastchs$HANDPUMP2<- ifelse(vastchs$HANDPUMP== 1, 1,0) \n```\n\n```{r}\ntable(vastchs$vitadef)                        #Counting\nprop.table(table(vastchs$vitadef))            #Percentages\n\ntable(vastchs$HANDPUMP, vastchs$HANDPUMP2)\n\n```\n\n#### Breast feeding as a potential protective factor agains vit A deficiency\n\n```{r}\ntable (vastchs$CURRBF)            #To see what values have CURRBF\nvastchs$CURRBF2<- ifelse(vastchs$CURRBF==1, 1,0)    #To change values to 0 to 1\ntable (vastchs$CURRBF, vastchs$CURRBF2)     #To see if has already changed\n```\n\nCalculate de OR\n\n```{r}\ntable (vastchs$vitadef, vastchs$CURRBF2)\nprop.table(table(vastchs$vitadef, vastchs$CURRBF2))       #Proportion above total sum\nprop.table(table(vastchs$vitadef, vastchs$CURRBF2), margin = 1) #Proportion above ROW\ncc(vastchs,vitadef,CURRBF2)\n```\n\nAgruping Variable\n\n```{r}\n# Regrouping (e.g. age in months to agegroup)\n          vastchs$agegrp <- NA\n          vastchs$agegrp[vastchs$AGE<12] <- \"1\"\n          vastchs$agegrp[vastchs$AGE>11 & vastchs$AGE<24] <- \"2\"\n          vastchs$agegrp[vastchs$AGE>23 & vastchs$AGE<36] <- \"3\"\n          vastchs$agegrp[vastchs$AGE>35 & vastchs$AGE<48] <- \"4\"\n          vastchs$agegrp[vastchs$AGE>47 & vastchs$AGE<60] <- \"5\"\n          # don't forget to convert agegrp to a factor variable\n          vastchs$agegrp <- factor(vastchs$agegrp)\n```\n\nBeing under2 is a coufunder?\n\n```{r}\nvastchs$under2 <- \"0\"\nvastchs$under2[vastchs$AGE<2] <- \"1\"\nvastchs$agegrp <- factor(vastchs$agegrp)\n```\n\n```{r}\nhist(vastchs$AGE)\nsummary(vastchs$AGE)\n```\n\nWith more options\n\n```{r}\nhist(vastchs$AGE,main=\"Age distribution of study participants\", \n     xlab=\"Age (years)\", ylab=\"nb\", col=\"green\", border=\"dark green\",\n     breaks=5)\n```\n\nWith Tidyverse\n\n```{r}\nggplot(vastchs, aes(x=AGE)) +\n  geom_histogram( color=\"darkblue\", fill=\"lightblue\",  alpha=0.5, origin = 0, binwidth=10)\n  \n```\n\n### Summary of a categorical variable\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"self-contained":true,"output-file":"2023-01-30 Session_VitA.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","theme":{"light":"flatly"},"title":"30-01-2023 Exercise"},"extensions":{"book":{"multiFile":true}}}}}