{"title":"Data Analysis Wk1","markdown":{"yaml":{"title":"Data Analysis Wk1","format":{"html":{"self-contained":true,"code-line-numbers":true},"pdf":{"documentclass":"article"}},"custom_title_page":false,"filters":["lightbox"],"lightbox":"auto"},"headingText":"abstract: Today we had an introduction to how to create subsets by row, subset by colls, appending (joining up-down), merging (joining left-righ), and how to reshape the database","containsRefs":false,"markdown":"\n\n---\nsubtitle: \"Data Analysis Week - Session 1\"\ndate: 2023-02-27\n\nauthor:\n  - name: Javier Silva-Valencia\n    orcid: 0000-0002-5982-2821\n    email: javier.silva@unmsm.edu.pe\n    affiliations:\n      - name: Instituut Voor Tropische Geneeskunde. Antwerp-Belgium\n\nlanguage: \n  title-block-author-single: \"Writer\"\n  \n\n------------------------------------------------------------------------\n\n------------------------------------------------------------------------\n\n\n### Exercise 1\n\n#### Import CSV\n\nSet working directory: We are not going to do it\n\nImporting the CSV database under the name of Q1_B, with \",\" as separator, and with \".\" as decimal:\n\n```{r}\nQ1_B <- read.csv(\"C:/Users/pined/OneDrive - Universidad Nacional Mayor de San Marcos/Javier 2022/Belgica/AC2_DataAnalysis_ThWk/Material/Q1_B.csv\", sep=\",\", dec= \".\")\n```\n\n#### Subset by row\n\nSeeing FSN\n```{r}\nsummary(Q1_B$FSN)\n```\n::: callout-tip\nThe median is 52032\n::: \n\nCreating subset\n```{r}\ntop <- subset(Q1_B, subset= FSN < 52032)\nbottom <- subset(Q1_B, subset= FSN >= 52032)\n```\n\nSeeing the structure in all sets\n```{r}\nstr(Q1_B)\nstr(top)\nstr(bottom)\n```\n::: callout-tip\nIn Q1_B we have 13377 obs\n\nTop + bottom: 6688 + 6689 =13377\n\nSo, it is ok\n::: \n\n#### Joining (Append)\n```{r}\nmerged_top_bottom  <-  rbind(top,bottom)\nstr(merged_top_bottom)\n```\n\n::: callout-tip\nThere are 13377 obs\n\nSo, it is ok\n::: \n\n\n#### Subset by colls\n\nSeeing the names of the variable\n```{r}\nnames(Q1_B)\n```\n\n```{r}\nLeft <- subset(Q1_B, select=c(\"ID\", \"FSN\", \"Neem_Tree\", \"Neem_Tree_Distance\", \"Neem_Tree_Size\", \"Neem_Tree_Age\", \"Neem_Tree_Usage\", \"Neem_Tree_Use_Other\", \"Bamboo_Tree\", \"Bamboo_Tree_Dist\", \"Banana_Tree\", \"Banana_Tree_Dist\", \"Rice_Field\", \"Rice_Field_Dist\", \"Perm_Water_Body\", \"Perm_Wat_Body_Dist\",  \"Wat_Body_Mid_Point\", \"No_Mosquito_Net\", \"Sprayed_2010\", \"Sprayed_2009\", \"Floor_Material\"))\nstr(Left)\n```\n\n```{r}\nRigth <- subset(Q1_B, select=c(\"FSN\", \"Other_Floor_Mat\", \"Is_Floor_Damp\", \"Roof_Material\", \"Other_Roof_Material\", \"Wall_Material\", \"Other_Wall_Material\", \"Windows_in_Room\", \"Granaries_in_HH\", \"Source_Drink_Water\", \"Other_Src_Drink_Wat\", \"Toilet_Facility\", \"Other_Toilet_Fac\", \"Cooking_Fuel\", \"Other_Cooking_Fuel\", \"Source_Light\", \"Other_Source_Light\", \"Electricity_in_HH\", \"No_Of_Rooms\", \"No_Sleeping_Rooms\"))\n\n#Or select the opposite (With a \"-\" in front of the c):\n#Rigth <- subset(Q1_B, select=-c(\"ID\", \"Neem_Tree\", \"Neem_Tree_Distance\", \"Neem_Tree_Size\", \"Neem_Tree_Age\", \"Neem_Tree_Usage\", \"Neem_Tree_Use_Other\", \"Bamboo_Tree\", \"Bamboo_Tree_Dist\", \"Banana_Tree\", \"Banana_Tree_Dist\", \"Rice_Field\", \"Rice_Field_Dist\", \"Perm_Water_Body\", \"Perm_Wat_Body_Dist\",  \"Wat_Body_Mid_Point\", \"No_Mosquito_Net\", \"Sprayed_2010\", \"Sprayed_2009\", \"Floor_Material\"))\n\nstr(Rigth)\n```\n#### Joining (Merge)\nJoin database by ID\n```{r}\nmerged_left_right  <-  merge(Left, Rigth, all=TRUE, by = \"FSN\")\nstr(merged_left_right)\n```\n\n### Exercise 2\n\n```{r}\nQ1_B_1 <- read.csv(\"C:/Users/pined/OneDrive - Universidad Nacional Mayor de San Marcos/Javier 2022/Belgica/AC2_DataAnalysis_ThWk/Material/Q1_B_1.csv\", sep=\",\", dec= \".\")\n```\n\n```{r}\nstr(Q1_B_1)\nhead(Q1_B_1)\n```\n\n::: callout-tip\nWe observe:\n  - There are 9029  obs\n  - There are duplicates in FSN\n  - The animal name is quite large sometimes\n  - The variable names are quite large\n::: \n\n#### Renaming variables\n\nRenaming variables labels: In collumns 2-5 to \"anim\", \"count\", \"dist\", \"indor\", \"daysin\"\n```{r}\nnames(Q1_B_1)[c(2,3,4,5,6)] <- c(\"anim\", \"count\", \"dist\", \"indor\", \"daysin\")\nstr(Q1_B_1)\n```\n\n#### Replacing values in observations\n\n```{r}\ntable(Q1_B_1$anim)\nQ1_B_1$anim[Q1_B_1$anim ==\"Buffaloes\"] <- \"Buff\"\nQ1_B_1$anim[Q1_B_1$anim ==\"Goats\"] <- \"Goat\"\n\n#But if we want to keep the 4 (x) first characters in a all rows\nQ1_B_1$anim <- substr(Q1_B_1$anim, 0, 3)\ntable(Q1_B_1$anim)\nstr(Q1_B_1)\n```\n\n#### Long to Wide\n\nWe need one line for each household\n\nSo, we will use reshape command to say: Reshape the database taking in to account that i want to make the database wider, having just one line for household (FSN) and replicating the variables count, dist, indor, daysin for every animal that the household had.\n\n```{r}\nanimals <- reshape(Q1_B_1,direction = \"wide\", timevar =\"anim\", idvar =\"FSN\", v.names = c(\"count\",\"dist\",\"indor\", \"daysin\"), sep = \"_\")\nstr(animals)\nclass(animals)\n\n```\n\n::: callout-tip\nWe observe:\n  - That now we have less observations (7147)(before was 9029  obs)\n    (so some houses had more than one animal)\n  - There are a lot of NA (households than doesn't have that animal)\n  - There are also some -1\n::: \n\n#### Replacing NA\nWe want to replace the NA and the -1 to Zero in all collums\n```{r}\nnames(animals)\n\n#View(animals)\n\nanimals$count_Buf[is.na(animals$count_Buf)| animals$count_Buf == -1]<- 0\nanimals$count_Cow[is.na(animals$count_Cow)| animals$count_Cow == -1]<- 0\n\n\n```\n\n```{r}\nsaveRDS(animals, \"animals.RDS\")\n```\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":4,"reference-location":"margin","filters":["lightbox"],"self-contained":true,"output-file":"Data Analysis Wk1.html"},"language":{"title-block-author-single":"Writer"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","knitr":{"opts_chunk":{"cache":true,"cache.lazy":false,"R.options":{"knitr.graphics.auto_pdf":true},"attr.source":".numberLines"}},"theme":{"light":"flatly"},"fontsize":"16px","linestretch":1.6,"smooth-scroll":true,"title":"Data Analysis Wk1","custom_title_page":false,"lightbox":"auto","subtitle":"Data Analysis Week - Session 1","date":"2023-02-27","author":[{"name":"Javier Silva-Valencia","orcid":"0000-0002-5982-2821","email":"javier.silva@unmsm.edu.pe","affiliations":[{"name":"Instituut Voor Tropische Geneeskunde. Antwerp-Belgium"}]}],"abstract":"Today we had an introduction to how to create subsets by row, subset by colls, appending (joining up-down), merging (joining left-righ), and how to reshape the database"},"extensions":{"book":{"multiFile":true}}},"pdf":{"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","filters":["lightbox"],"output-file":"Data Analysis Wk1.pdf"},"language":{"title-block-author-single":"Writer"},"metadata":{"block-headings":true,"editor":"visual","knitr":{"opts_chunk":{"cache":true,"cache.lazy":false,"R.options":{"knitr.graphics.auto_pdf":true},"attr.source":".numberLines"}},"title":"Data Analysis Wk1","custom_title_page":false,"lightbox":"auto","subtitle":"Data Analysis Week - Session 1","date":"2023-02-27","author":[{"name":"Javier Silva-Valencia","orcid":"0000-0002-5982-2821","email":"javier.silva@unmsm.edu.pe","affiliations":[{"name":"Instituut Voor Tropische Geneeskunde. Antwerp-Belgium"}]}],"abstract":"Today we had an introduction to how to create subsets by row, subset by colls, appending (joining up-down), merging (joining left-righ), and how to reshape the database","documentclass":"article"},"extensions":{"book":{}}}}}