{"title":"2023-02-10 Session 1","markdown":{"yaml":{"title":"2023-02-10 Session 1","format":{"html":{"self-contained":true}}},"headingText":"Step by Step - Selection of variables for modeling","containsRefs":false,"markdown":"\n\n\n-   Instituut Voor Tropische Geneeskunde - Antwerp, Belgium\n-   Javier Silva-Valencia\n\n\n##### Import data\n\nImporting a CSV database under the name of \"poisson_smoking_mort\", with \",\" as separator:\n\n```{r}\npoisson_smoking_mort <- read.csv(\"C:/Users/pined/OneDrive - Universidad Nacional Mayor de San Marcos/Javier 2022/Belgica/AC2/Logistic Regresion Exercise Database/Datasets/poisson_smoking_mort.csv\", sep=\",\")\n```\n\n------------------------------------------------------------------------\n\n------------------------------------------------------------------------\n\n### Starting the Exercise\n\n```{r}\nstr(poisson_smoking_mort)\npoisson_smoking_mort$smoke <-   factor(poisson_smoking_mort$smoke)\n```\n\n```{r}\n\ntable1 <- aggregate(cbind(deaths, pop) ~ smoke, data=poisson_smoking_mort, FUN=sum)\ntable1\n```\n\n```{r}\ntable(poisson_smoking_mort$smoke)\n```\n\n\n# Doing the poisson\n```{r}\nGLM.1 <- glm(deaths ~  offset(log(pop)) + smoke, family=poisson(log), data=poisson_smoking_mort)\nsummary(GLM.1)\nexp(coef(GLM.1))\nexp(confint(GLM.1))\n```\n\n```{r}\nGLM.2 <- glm(deaths ~  offset(log(pop)) + smoke + factor(age), family=poisson(log), data=poisson_smoking_mort)\nsummary(GLM.2)\nexp(coef(GLM.2))\nexp(confint(GLM.2))\n```\n\n```{r}\nanova(GLM.1, GLM.2, test=\"Chisq\")\n```\n\nGLM.3 interaction\n\nANOVA GLM.2 vs GLM.3 (interaction is not necessary)\n\n\nCheck if the dispersion parameter is near to one (if it to far to 1, then the stardat error could be wrong). This is done before we can say that this model is significant\n\n```{r}\ndispp <- sum(residuals(GLM.2, type=\"pearson\")^2)/GLM.2$df.residual\ndispp\n```\nMy dispersion parameter is close to 1 so we can keep it with the poisson model, but yet we will gonna try the other way (negative binomial model)\n\nlibrary(MAAS)\nGLM.NM <- glm.nb(deaths ~  offset(log(pop)) + smoke + factor(age), data=poisson_smoking_mort)\nexp(coef(GLM.NM))\nexp(confint(GLM.NM))\n\nThe OR and IC are similar in bot models (poisson and negative binomial model)\n\n\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"self-contained":true,"output-file":"2023-02-10 Poisson Regression Session 1.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","theme":{"light":"flatly"},"title":"2023-02-10 Session 1"},"extensions":{"book":{"multiFile":true}}}}}