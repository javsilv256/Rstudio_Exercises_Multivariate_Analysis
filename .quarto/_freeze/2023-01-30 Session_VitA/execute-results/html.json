{
  "hash": "10eda56ec90b75b352631a1a1500de26",
  "result": {
    "markdown": "---\ntitle: \"30-01-2023 Exercise\"\nformat: \n  html:\n    self-contained: true\n---\n\n\n#### Context\n\nField trial in rural northern Ghana on the effect of Vitamin A given in large doses to children under 5 . The data in this exercise were taken from the baseline survey. They include interview data provided by the mother or her substitute, clinical and laboratory data. You will find the da-ta in VASTCHS.csv . Please note that in this csv file semi colons (;) have been used as field separators and comma's as decimal-point characters. Take this into account when you import the dataset in R!\n\n### 1. Preparation\n\n##### Keyboard shortcuts:\n\n    - `ctrl + shift + m` -\\> `%>%` (operador pipe)\n    - `ctrl + alt + i` -\\> Crea un chunk de código\n\n##### Set working directory\n\n    - setwd(\"C:/Users/xxx/yyy\") \n    - getwd()\n\n##### Load (basic) packages\n\nTo import Excel files library(readxl) To calculate OR or RR library(EpiStats)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)                      # To import Excel files\nlibrary(tidyverse)                   # Varias funciones de tidyverse (dplyr, ggplot2, etc.)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.3.6      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.4.1 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(dslabs)                      # Paquete que contiene la base de datos de Gapminder\nlibrary(EpiStats)                    # To calculate OR or RR\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'EpiStats' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: epiR\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'epiR' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: survival\nPackage epiR 2.0.53 is loaded\nType help(epi.about) for summary information\nType browseVignettes(package = 'epiR') to learn how to use epiR for applied epidemiological analyses\n```\n:::\n:::\n\n\n##### Import data\n\n-   From Text (.csv)-example\n    -   data \\<- read.csv(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.csv\")\n-   From Excel file (.xls, .xlsx)-example\n    -   library(readxl)\n    -   data \\<- read_excel(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.xlsx\")\n-   from STATA file (.dta)-example\n    -   library(haven)\n    -   data \\<- read_dta(\"H:/Teaching/My_Courses/IIH-epistat/R/Sharm_Exercise/mysharm.dta\")\n\nImporting a CSV under the name of vastchs, with \";\" as separator, and with \",\" as decimal:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvastchs <- read.csv(\"C:/Users/pined/OneDrive - Universidad Nacional Mayor de San Marcos/Javier 2022/Belgica/AC2/Linear Regresion Exercise Database/Datasets/VASTCHS.csv\", sep=\";\", dec= \",\")\n```\n:::\n\n\n## 2. Descriptive Statistics\n\n#### Summary\n\n##### Numeric Variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(vastchs$AGE)                      #summary\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00   10.00   21.00   22.49   34.00   55.00 \n```\n:::\n\n```{.r .cell-code}\nvar(vastchs$AGE)                          #variance\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 200.287\n```\n:::\n\n```{.r .cell-code}\nsd(vastchs$AGE)                           #standart desviation\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 14.15228\n```\n:::\n:::\n\n\n##### Categoric Variable\n\nFrecuency and Percentage\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(vastchs$SEX)                        #Counting\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  1   2 \n560 577 \n```\n:::\n\n```{.r .cell-code}\nprop.table(table(vastchs$SEX))            #Percentages\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n        1         2 \n0.4925242 0.5074758 \n```\n:::\n:::\n\n\nRecode to a factor - From number to string\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvastchs$SEX2<-factor(vastchs$SEX, levels=c(1,2))\nsummary(vastchs$SEX2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  1   2 \n560 577 \n```\n:::\n:::\n\n\n#### Creating variables- Recoding: Yes/No = 1/0\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvastchs$wasted<- ifelse(vastchs$WHZ< -2, 1,0)     #wasted si es menos a -2 poner 1 sino 0\nvastchs$stunded<- ifelse(vastchs$HAZ< -2, 1,0)     #stunded si es menos a -2 poner 1 sino 0\nvastchs$underweight<- ifelse(vastchs$WAZ< -2, 1,0)     #undweig si es menos a -2 poner 1 sino 0\nvastchs$anemia<- ifelse(vastchs$HB< 8, 1,0)     #anemia si es menos que 8 poner 1 sino 0\nvastchs$vitadef<- ifelse(vastchs$RETINOL< 0.7, 1,0)     #Def of VitA si es menos de 0.7 poner 1 sino 0\n\nvastchs$HANDPUMP2<- ifelse(vastchs$HANDPUMP== 1, 1,0) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(vastchs$vitadef)                        #Counting\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1 \n302 835 \n```\n:::\n\n```{.r .cell-code}\nprop.table(table(vastchs$vitadef))            #Percentages\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n        0         1 \n0.2656113 0.7343887 \n```\n:::\n\n```{.r .cell-code}\ntable(vastchs$HANDPUMP, vastchs$HANDPUMP2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n      0   1\n  1   0 903\n  2  65   0\n  3 169   0\n```\n:::\n:::\n\n\n#### Breast feeding as a potential protective factor agains vit A deficiency\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable (vastchs$CURRBF)            #To see what values have CURRBF\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  1   2 \n793 344 \n```\n:::\n\n```{.r .cell-code}\nvastchs$CURRBF2<- ifelse(vastchs$CURRBF==1, 1,0)    #To change values to 0 to 1\ntable (vastchs$CURRBF, vastchs$CURRBF2)     #To see if has already changed\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n      0   1\n  1   0 793\n  2 344   0\n```\n:::\n:::\n\n\nCalculate de OR\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable (vastchs$vitadef, vastchs$CURRBF2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n      0   1\n  0  74 228\n  1 270 565\n```\n:::\n\n```{.r .cell-code}\nprop.table(table(vastchs$vitadef, vastchs$CURRBF2))       #Proportion above total sum\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n             0          1\n  0 0.06508355 0.20052770\n  1 0.23746702 0.49692172\n```\n:::\n\n```{.r .cell-code}\nprop.table(table(vastchs$vitadef, vastchs$CURRBF2), margin = 1) #Proportion above ROW\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n            0         1\n  0 0.2450331 0.7549669\n  1 0.3233533 0.6766467\n```\n:::\n\n```{.r .cell-code}\ncc(vastchs,vitadef,CURRBF2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$df1\n                   Cases Controls Total\nExposed              565      228   793\nUnexposed            270       74   344\nTotal                835      302  1137\nProportion exposed  0.68     0.75  0.70\n\n$df2\n                Point estimate 95%CI-ll 95%CI-ul\nOdds ratio                0.68     0.50     0.92\nPrev. frac. ex.           0.32     0.08     0.50\nPrev. frac. pop           0.24       NA       NA\nchi2(1)                   6.45       NA       NA\nPr>chi2                  0.011       NA       NA\n```\n:::\n:::\n\n\nAgruping Variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Regrouping (e.g. age in months to agegroup)\n          vastchs$agegrp <- NA\n          vastchs$agegrp[vastchs$AGE<12] <- \"1\"\n          vastchs$agegrp[vastchs$AGE>11 & vastchs$AGE<24] <- \"2\"\n          vastchs$agegrp[vastchs$AGE>23 & vastchs$AGE<36] <- \"3\"\n          vastchs$agegrp[vastchs$AGE>35 & vastchs$AGE<48] <- \"4\"\n          vastchs$agegrp[vastchs$AGE>47 & vastchs$AGE<60] <- \"5\"\n          # don't forget to convert agegrp to a factor variable\n          vastchs$agegrp <- factor(vastchs$agegrp)\n```\n:::\n\n\nBeing under2 is a coufunder?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvastchs$under2 <- \"0\"\nvastchs$under2[vastchs$AGE<2] <- \"1\"\nvastchs$agegrp <- factor(vastchs$agegrp)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(vastchs$AGE)\n```\n\n::: {.cell-output-display}\n![](2023-01-30-Session_VitA_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsummary(vastchs$AGE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00   10.00   21.00   22.49   34.00   55.00 \n```\n:::\n:::\n\n\nWith more options\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(vastchs$AGE,main=\"Age distribution of study participants\", \n     xlab=\"Age (years)\", ylab=\"nb\", col=\"green\", border=\"dark green\",\n     breaks=5)\n```\n\n::: {.cell-output-display}\n![](2023-01-30-Session_VitA_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nWith Tidyverse\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(vastchs, aes(x=AGE)) +\n  geom_histogram( color=\"darkblue\", fill=\"lightblue\",  alpha=0.5, origin = 0, binwidth=10)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `origin` is deprecated. Please use `boundary` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](2023-01-30-Session_VitA_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n### Summary of a categorical variable\n",
    "supporting": [
      "2023-01-30-Session_VitA_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}